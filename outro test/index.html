<!DOCTYPE html>
<html lang="pt-BR">
<!-- No head, remova os plugins pagos -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acessar plataforma</title>
    <link href="style.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100..900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/gsap@3.11.0/dist/gsap.min.js"></script>
</head>
<body>
    <div class="container">
        <form>
            <h1>Acessar plataforma</h1>
            <div class="login">
                <input placeholder="Email" type="email" required>
                <img width="20" height="20" src="https://img.icons8.com/ios-glyphs/90/user--v1.png" alt="user--v1" class="user" />
            </div>
            <div class="login">
                <input id="password" type="password" placeholder="Senha" required />
                <button class="button1" type="button" title="Reveal Password" aria-pressed="false">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <mask id="eye-open">
                                <path d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12V20H12H1V12Z" fill="#D9D9D9" stroke="black" stroke-width="1.5" stroke-linejoin="round" />
                            </mask>
                            <mask id="eye-closed">
                                <path d="M1 12C1 12 5 20 12 20C19 20 23 12 23 12V20H12H1V12Z" fill="#D9D9D9" />
                            </mask>
                        </defs>
                        <path class="lid lid--upper" d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                        <path class="lid lid--lower" d="M1 12C1 12 5 20 12 20C19 20 23 12 23 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                        <g mask="url(#eye-open)">
                            <g class="eye">
                                <circle cx="12" cy="12" r="4" fill="currentColor" />
                                <circle cx="13" cy="11" r="1" fill="black" />
                            </g>
                        </g>
                    </svg>
                    <span class="sr-only">Reveal</span>
                </button>
            </div>
            <button class="button" type="submit">Entrar</button>
            <div class="register">
                <p>Não está cadastrado? <a href="/register/register.html">Cadastrar</a></p>
            </div>
        </form>
    </div>

    <script>
        const BLINK_SPEED = 0.075;
        const TOGGLE_SPEED = 0.125;
        const eye = document.querySelector('.eye');
        const button = document.querySelector('.button1');
        const input = document.querySelector('#password');
        let blinkTl;
        let busy = false;
    
        const paths = {
            upperOpen: "M1 12C1 12 5 4 12 4C19 4 23 12 23 12",
            upperClosed: "M1 12C1 12 5 20 12 20C19 20 23 12 23 12",
            lowerOpen: "M1 12C1 12 5 20 12 20C19 20 23 12 23 12",
            lowerClosed: "M1 12C1 12 5 4 12 4C19 4 23 12 23 12"
        };
    
        const blink = () => {
            if (busy) return;
            
            const delay = gsap.utils.random(2, 8);
            blinkTl = gsap.timeline({
                delay,
                onComplete: () => blink(),
                repeat: Math.random() > 0.5 ? 3 : 1,
                yoyo: true
            })
            .to('.lid--upper', {
                attr: { d: paths.upperClosed },
                duration: BLINK_SPEED,
                ease: "power2.inOut"
            })
            .to('.lid--lower', {
                attr: { d: paths.lowerClosed },
                duration: BLINK_SPEED,
                ease: "power2.inOut"
            }, 0);
        };
    
        const posMapper = gsap.utils.mapRange(-100, 100, 30, -30);
        let reset;
        
        const moveEye = ({ x, y }) => {
            if (reset) reset.kill();
            
            reset = gsap.delayedCall(2, () => {
                gsap.to('.eye', { xPercent: 0, yPercent: 0, duration: 0.2 });
            });
    
            const bounds = eye.getBoundingClientRect();
            gsap.to('.eye', {
                xPercent: gsap.utils.clamp(-30, 30, posMapper(bounds.x - x)),
                yPercent: gsap.utils.clamp(-30, 30, posMapper(bounds.y - y)),
                duration: 0.2
            });
        };
    
        window.addEventListener('mousemove', moveEye);
        blink();
    
        button.addEventListener('click', () => {
            if (busy) return;
            
            const isPassword = input.type === 'password';
            input.type = isPassword ? 'text' : 'password';
            busy = true;
    
            if (isPassword) {
                if (blinkTl) blinkTl.kill();
    
                gsap.timeline({
                    onComplete: () => {
                        busy = false;
                    }
                })
                .to('.lid--upper', {
                    attr: { d: paths.upperClosed },
                    duration: TOGGLE_SPEED,
                    ease: "power2.inOut"
                })
                .to('.lid--lower', {
                    attr: { d: paths.lowerClosed },
                    duration: TOGGLE_SPEED,
                    ease: "power2.inOut"
                }, 0);
            } else {
                gsap.timeline({
                    onComplete: () => {
                        blink();
                        busy = false;
                    }
                })
                .to('.lid--upper', {
                    attr: { d: paths.upperOpen },
                    duration: TOGGLE_SPEED,
                    ease: "power2.inOut"
                })
                .to('.lid--lower', {
                    attr: { d: paths.lowerOpen },
                    duration: TOGGLE_SPEED,
                    ease: "power2.inOut"
                }, 0);
            }
        });
    
        document.querySelector('form').addEventListener('submit', e => e.preventDefault());
    </script>
</body>
</html>